# [Educational Codeforces Round 137 (Rated for Div. 2)](https://codeforces.com/contest/1743)

## A

$\binom{10 - n}{2} \cdot \binon{4}{2} = 3 \cdot (10 - n)(9 - n)$

## B

把 $1$, $2$ 分别放在左右两侧

## C

考虑一段连续的 `1`，那么这段的答案为它们和左边的 0（如果有的话）的总和减去最小的那个

## D

不妨假设 $s$ 以 `1` 开头（否则删除前面的 `0`），贪心，让 $s_1 = s$, 找到 $s_1$ 第一个 `0` 的位置假设为 $i$，那么 $s_2$ 的长度就确定了为 $n - i$，所以可选移动的位置为 $i$，这 $i$ 中情况的最大值即为答案。

> 注意到题目中说了 $s$ 是完全随机的，所以 $i$ 必然很小，例如 $i < 20$，所以复杂度肯定没问题

## E

装弹是可以同步进行的！

## F

> 线段树写错了一个地方，debug 了半天，然后错过了交题时间，不做 E 的话，真有可能 debug 出来

想想每个点的贡献！

假设左边有 $x$ 个 $u$，设当前位置为 $i$
- 当前不包含 $u$ ，就变成 $2x$ 个 $i$
- 当前包含 $u$，就变成 $2x + (3^{i - 1} - x) \cdot 2 = 2 \cdot 3^{i - 1}$

两种处理方式：
1. 每次默认乘以 $2$，所以第一种情况就无视，第二种情况相当于乘以 $(\frac{3}{2})^{i - 1}$，用懒区间更新线段数维护和即可
2. 对每个点考虑最后一个包含它的区间的编号（编号用 1 开始），假设为 $i$，那么答案就是 如果 $i = 1$, 答案为 $2^{n - 1}$，否则为 $2^{n - i + 1} * 3^{i - 2}$，如果找不到就忽略，也可以用线段树解决（代码更简洁）


样例
```
4
1 9
3 5
4 8
2 2
```

样例模拟

```
   0, 1, 2, 3
------------------------
1: 1, 2, 4, 8 = 2^3
2: 1, 2, 4, 18 = 2 * 3^2
3: 1, 2, 4, 8 = 2^3
4: 1, 2, 6, 12 = 2^2 * 3
5: 1, 2, 6, 12
6: 1, 2, 6, 12
7: 1, 2, 6, 12
8: 1, 2, 6, 12
9: 1, 2, 4, 8
```
